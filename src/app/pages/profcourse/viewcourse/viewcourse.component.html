<app-header [isLogin]="true"></app-header>

<section class="section">
  <h1>COURSE DETAILS</h1>
</section>

@if(addVideo===true){
<div class="modal">
  <form
    method="POST"
    class="form"
    [formGroup]="videoForm1"
    enctype="multipart/form-data"
  >

  <label>Video Title</label>
    <input
      class="inp"
      placeholder="Video Title"
      type="text"
      formControlName="videoTitle"
      required
    />

    <label>Video Description</label>

    <textarea
      class="inp"
      placeholder="Video Description"
      formControlName="videoDescription"
      required
    ></textarea>
    <!-- <input
      class="inp"
      type="number"
      placeholder="Video Duration (in minutes)"
      formControlName="videoDuration"
      required
    /> -->
    <label for="videoFile">Upload Video</label>
    <input type="file" (change)="onFileChange($event)" required />
    <button class="btn" type="submit" (click)="submitVideo()">Submit</button>
    <button type="button" class="btn" (click)="addVideo = false">Cancel</button>
  </form>
</div>
} @if(updateModalVisible===true) {
<div class="modal">
  <form
    method="POST"
    class="form"
    [formGroup]="courseForm1"
    enctype="multipart/form-data"
  >

  <label>Video Title</label>
    <input
      type="text"
      placeholder="Video Title"
      id="videoTitle"
      formControlName="videoTitle"
      required
    />

    <label>Video Description</label>

    <textarea
    style="height: 120px;"
      id="videoDescription"
      placeholder="Video Description"
      formControlName="videoDescription"
      required
    ></textarea>
    <!-- <input
      type="number"
      placeholder="Video Duration (in minutes)"
      id="videoDuration"
      formControlName="videoDuration"
      required
    /> -->
    <label for="videoFile">Upload Video</label>
    <input
      type="file"
      id="videoFile"
      (change)="onFileChange($event)"
      required
    />
    <button type="button" class="btn" (click)="updateCourse()">Update</button>
    <button type="button" class="btn" (click)="updateModalVisible = false">
      Cancel
    </button>
  </form>
</div>

}
<div class="container">
  <div class="course-category">
    @for(course of courses;track course.id){

    <div class="course-details">
      <h2>{{ course.courseCategory }}</h2>
      @for(courseDet of course.courseDetailList;track courseDet.courseId){

        <div class="course-desc">
          <h4 >{{ courseDet.courseName }}</h4>
      <p>{{ courseDet.coursedescription }}</p>
        </div>


        <div class="upload-video">
<h1>Videos</h1>
@if(role=='ROLE_INSTRUCTOR'){
          <button
          class="btn"
          type="button"
          (click)="enableVideoDets(courseDet.courseId)"
        >
          Upload video
        </button>
      }
        </div>



      <!-- <button (click)="editCourse(courseDet)">Update</button>  -->

      <ul class="video-details">
        @for(vid of courseDet.videoBean;track vid.videoId){

        <li>
          <div class="video">
            <div>
              <h3 class="title">{{ vid.videoTitle }}</h3>

              <div class="video-view">
                <div>
                  <video controls>
                    <source [src]="vid.videoLink" />
                  </video>
                </div>
                <div>
                  <p>{{ vid.videoDescription }}</p>
                </div>
              </div>
            </div>
            <div>
              @if(role=='ROLE_INSTRUCTOR'){
              <i
                (click)="editCourse(courseDet, vid)"
                class="fa-solid fa-pen-to-square fa-2xl"
              >
              </i>
              }
            </div>
          </div>
        </li>

        }
      </ul>

      }
    </div>

    }
  </div>
</div>


<app-footer></app-footer>

<app-loader [isLoading]="isLoading"></app-loader>
